#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char const *argv[])
{
    char *char_ptr;
    int *int_ptr;
    int mem_size;

    // argc is the amount of commandline arguments
    if (argc < 2) {
        mem_size = 50;
    }
    else {
        mem_size = atoi(argv[1]);
    }

    printf("Allocating %d memory to the heap for char_ptr\n", mem_size);
    char_ptr = (char *) malloc(mem_size);

    if (char_ptr == NULL) {
        fprintf(stderr, "Error: Could not allocate heap memory.\n");
        exit(-1);
    }

    strcpy(char_ptr, "This memory is allocated to the heap.");
    printf("char_ptr (%p) --> '%s'\n", char_ptr, char_ptr);

    printf("Freeing char_ptr's heap memory\n");
    free(char_ptr);

    printf("Allocating another 15 bytes for char_ptr\n");
    char_ptr = (char *) malloc(15);

     if (char_ptr == NULL) {
        fprintf(stderr, "Error: Could not allocate heap memory.\n");
        exit(-1);
    }

    strcpy(char_ptr, "New memory");
    printf("char_ptr (%p) --> '%s'\n", char_ptr, char_ptr);

    printf("Freeing char_ptr's heap memory\n");
    free(char_ptr);

}
